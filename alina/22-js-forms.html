<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Formulare</title>
</head>

<body>

    <form action="#" id="firstForm">
        <section>
            <h1>Datalist & Autovervollständigung</h1>
            <input type="text" id="inp1" list="farben" autocomplete="on" />
            <!-- 2 inputs dürfen die gleiche Data-Liste benutzen -->
            <!-- <input type="text" id="inp2" list="farben" autocomplete="on" /> -->
            <datalist id="farben">
                <option value="Rot"></option>
                <option value="Grün"></option>
                <option value="Blau"></option>
            </datalist>
            <button id="btn1" type="button">OK</button>
            <output id="outp1"></output>
        </section>
        
        <section>
            <h1>fieldset</h1>
            <p>Eingabe aus Input wird beim Klick auf Button in Output angezeigt</p>
            <fieldset>
                <legend>NAME</legend>
                <label for="fname">VORNAME
                    <input id="fname" type="text" placeholder="Max" />
                </label>

                <label for="lname">NACHNAME
                    <input id="lname" type="text" placeholder="Mustermann" title="title test ohne pattern" />
                </label>
                <label for="">EMAIL
                    <input type="email" name="" id="" value="@gmail.com" pattern="^.+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$"
                        title="Achte auf RegExp" /></label>

                <button onclick="showInputValue()">zeige die Eingabe</button>
                <!-- <button type="button" onclick="showInputValue()">zeige die Eingabe</button> -->
            </fieldset>
            <output id="outp2"></output>

            <hr />
        </section>

        <section>
            <h1>input:color</h1>
            <input type="color" name="clr" id="crlId" tabindex="3" />

            <hr />
        </section>

        <section>
            <h1>input:radio</h1>
            <h3>Matrixfrage links / rechts</h3>
            <p>Inputs von type radio sind durch Attr name verbunden</p>
            <div>
                <label for="left">ADD INPUTS</label><input type="radio" id="left" value="left" name="additional" />
            </div>
            <div>
                <label for="right">CONTINUE</label><input type="radio" id="right" value="right" name="additional" />
            </div>
            <output id="outRadio"></output>
            <hr />
        </section>

        <section>
            <h1>input:checkbox</h1>
            <h3>Pizzaextras</h3>
            <div>
                <label for="cheese">Käse</label>
                <input type="checkbox" id="cheese" name="inpCheck" value="Käse" />
            </div>
            <div>
                <label for="salami">Salami</label>
                <input type="checkbox" id="salami" name="inpCheck" value="Salami" />
            </div>
            <div>
                <label for="mushrooms">Pilze</label>
                <input type="checkbox" id="mushrooms" name="inpCheck" value="Pilze" />
            </div>
            <div>
                <label for="pineapple">Ananas</label>
                <input type="checkbox" id="pineapple" name="inpCheck" value="Ananas" />
            </div>
            <button type="button" id="btnPizza">OK</button>
            <output id="outPizza"></output>
            <hr />
        </section>

        <section>
            <h1>input:range</h1>
            <h3>Hotelzimmerabfrage</h3>
            <div>
                <label for="inpPrice">Zimmerpreis: </label>
                <span id="minSpan"></span>
                <input type="range" id="inpPrice" min="20" max="200" step="5" value="70" />
                <span id="maxSpan"></span>
                <span>| Ihr ausgewählter Preis: </span>
                <output id="outpPrice"></output>
            </div>
            <hr />
        </section>

        <section>
            <h1>min max & try catch</h1>
            <p>
                Beim Alter 7-16 - Kindermarathon, 17-65 - Marathon, 65-75 - Marathon mit
                Zusatzversicherung, 75-... - Teilnahme nicht möglich
            </p>
            <label for="inpAge">Ihr Alter:</label>
            <!-- Mit Attribut for bei Label und id bei input werden diese beiden 
                    Elemente verbunden. Beim Klicken auf label-Text erscheint Kursor im Input-Feld -->
            <input type="number" id="inpAge" min="7" max="99" />
            <button type="button" id="btnAge">OK</button>
            <output id="outInfo"></output>

            <hr>
        </section>

        <section>
            <h2>Datumvalidierung</h2>

            <fieldset id="person">
                <legend>Person</legend>
                <div class="inpItem"><input id="inpVNameId" type="text" placeholder="Vorname"></div>
                <div class="inpItem"><input id="inpNNameId" type="text" placeholder="Nachname"></div>
                <div class="inpItem"><input id="inpGebDatId" type="date" title="Geburtsdatum"></div>
            </fieldset>
            <fieldset id="pass">
                <legend>Pass</legend>
                <div class="inpItem"><input id="inpPassNrId" type="text" placeholder="ReisepassNr"
                        pattern="^[A-Z0-9]{6,}$">
                </div>
                <div class="inpItem"><input id="inpBehördeId" type="text" placeholder="Ausstellende Behörde"></div>
                <div class="inpItem"><label for="inpAusstDatId">Ausstellungsdatum<input id="inpAusstDatId" type="date"
                            title="Ausstellungsdatum"></label> </div>
                <div class="inpItem"><label for="inpAblDatId">Ablaufsdatum<input id="inpAblDatId" type="date"
                            title="Ablaufsdatum"></label> </div>
                <div class="inpItem"><input type="button" id="btnValidatePassId" value="OK"></div>
                <div id="infoMessageDiv"></div>

            </fieldset>

        </section>

        <section>
            <h2>input:url</h2>
            <input type="url" name="" id="inpUrl">
        </section>

        <section>
            <h2>input:search</h2>
            <p>in Chrome erscheint ein Kreuz zum Löschen von der Eingabe</p>
            <input type="search" name="" id="inpSearch">
        </section>

        <section>
            <h2>input:file</h2>
            <input type="file" name="" id="inpFile">
        </section>
    </form>

    <script>
        /* INPUT & DATALIST */
        btn1.addEventListener("click", showCol)
        function showCol() {
            let col = document.getElementById("inp1").value;
            outp1.textContent = col;
        }

        // RADIO

        // FIELDSET
        function showInputValue() {
            let text;
            text = fname.value + " " + lname.value;
            outp2.textContent = text;
        }

        // CHECKBOX
        btnPizza.addEventListener("click", getSelected, true);
        function getSelected() {
            outPizza.textContent = "";
            // console.log('hallo aus getSelected');
            const extrasArr = document.getElementsByName("inpCheck"); // NodeList
            console.log(extrasArr);
            // extrasArr.forEach(function (el) { return outPizza.innerText += el.checked; });
            extrasArr.forEach(el => {
                if (el.checked === true) {
                    outPizza.textContent += el.value + " ";
                }
            });
        }

        // RANGE
        minSpan.textContent = inpPrice.min;
        maxSpan.textContent = inpPrice.max;
        function showPrice() {
            // console.log(inpPrice); // ist ein Objekt, welches dem HTML-Element entspricht
            outpPrice.textContent = inpPrice.value;
        }
        inpPrice.addEventListener("input", showPrice);
        // showPrice();

        // TRY CATCH FINALLY

        function trycatch() {
            let inpValue = inpAge.value;
            let errorMessage;
            console.log(typeof inpValue);
            try {
                /* beim leeren Input und beim Text kommt ein leeres String zurück */
                if (inpValue === "") {
                    throw "Bitte geben Sie eine Zahl ein";
                }
                if (inpValue < 7) {
                    throw "zu jung";
                }
                if (inpValue > 75) {
                    throw "Teilnahme nicht möglich";
                }
            } catch (errorMessage) {
                outInfo.textContent = "Error Message: " + errorMessage;
            } finally {
                if (inpValue >= 7 && inpValue <= 16) {
                    outInfo.textContent = "Willkommen beim Kindermarathon";
                }
                if (inpValue >= 17 && inpValue <= 65) {
                    outInfo.textContent = "Willkommen beim Marathon";
                }
                if (inpValue >= 66 && inpValue <= 75) {
                    outInfo.textContent =
                        "Willkommen beim Marathon, bitte beachten Sie die Anforderungen für Senioren";
                }
            }
        }
        btnAge.addEventListener("click", trycatch);


        /* /////////////DATUMVALIDIERUNG / DATUMPLAUSIBILITÄT ////////////// */
        btnValidatePassId.addEventListener("click", myFunction);

        function myFunction() {
            console.info('Geburtsdatum')
            console.log(inpGebDatId.valueAsNumber)
            console.info('Ausstellungsdatum')
            console.log(inpAusstDatId.valueAsNumber)
            console.info('Ablaufsdatum')
            console.log(inpAblDatId.valueAsNumber)

            var errMessage;
            let twenty = 6.307e+11; //20 jahre

            try {
                if (inpGebDatId.valueAsNumber > inpAusstDatId.valueAsNumber) {
                    throw 'ausstellungsdatum jünger als geburtsdatum'
                }
                if (inpAusstDatId.valueAsNumber > inpAblDatId.valueAsNumber) {
                    throw 'ablaufdatum jünger als ausstellungsdatum'
                }
                if ((inpAblDatId.valueAsNumber - inpAusstDatId.valueAsNumber) > twenty) {
                    throw 'pass darf nicht länger als 20 jahre älter sein'
                }
            }
            catch (errMessage) {
                infoMessageDiv.textContent = "Error Message: " + errMessage;
                infoMessageDiv.style.color = "red";
                console.log("Error Message: " + errMessage);
            }
            finally {
                /* das überschreibt die Fehlermeldung */
                console.log(errMessage); // undefined
                if (errMessage) {
                    infoMessageDiv.innerHTML = "Danke für Ihre Angaben" + "&#127849";
                    infoMessageDiv.style.color = "green";
                }
            }
        }

        // INPUT URL

        // INPUT SEARCH

        // INPUT FILE

        inpFile.addEventListener('input', handleFileInput);
        function handleFileInput() {
            console.log('inpFile.value :', inpFile.value); // C:\fakepath\selteneShortcuts.txt als string
        }
    </script>

</body>

</html>